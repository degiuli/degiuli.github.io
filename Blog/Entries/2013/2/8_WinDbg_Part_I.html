<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 2.0.4" />
    <meta name="iWeb-Build" content="local-build-20130324" />
    <meta name="viewport" content="width=700" />
    <title>windows debugging series</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="8_WinDbg_Part_I_files/8_WinDbg_Part_I.css" />
    <!--[if IE]><link rel='stylesheet' type='text/css' media='screen,print' href='8_WinDbg_Part_I_files/8_WinDbg_Part_IIE.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'Blog.html';
iWebBlogMainPageTitle = 'Blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';
iWebBlogFeedType = 'static';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="8_WinDbg_Part_I_files/8_WinDbg_Part_I.js"></script>
  </head>
  <body style="background: #ffffff url(8_WinDbg_Part_I_files/PhotoGray_browser_bg-3.jpg) repeat scroll top left; margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  text-align: left; width: 700px; " id="body_content">
        <div style="background: transparent url(8_WinDbg_Part_I_files/PhotoGray_bg_c-1.jpg) repeat scroll top left; width: 700px; ">
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div style="height: 700px; width: 700px;  height: 700px; left: 0px; position: absolute; top: -80px; width: 700px; z-index: 1; " class="tinyText style_SkipStroke">
              <img src="8_WinDbg_Part_I_files/Darkroom_spotlight.jpg" alt="" style="border: none; height: 700px; width: 700px; " />
            </div>
            <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
            <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 19px; position: relative; width: 700px; z-index: 1; ">
    
              <div id="widget0-navbar" class="navbar">

      
                <div id="widget0-bg" class="navbar-bg">

        
                  <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                  
      
</div>
                
    
</div>
            </div>
            <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: Futura, 'Trebuchet MS', sans-serif;\n\ttext-transform: uppercase;\n\tfont-size: .7em;\n\tcolor: #C1C1C1;\n\tline-height: 25px;\n\ttext-align: center;\n\tpadding: 0px;\n\tbackground-image: url(8_WinDbg_Part_I_files\/PhotoGray_nav_bg.png);\n\t_background-image: url(8_WinDbg_Part_I_files\/PhotoGray_nav_bg.jpg);\n\tbackground-repeat: repeat-y;\n\tborder-top: 1px solid #999;\n\tborder-bottom: 1px solid #999;\n}\n\n.navbar-bg {\n\tpadding: 6px 0px 4px 0px;\n}\n\n.navbar ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n.navbar ul li {\n\tdisplay: inline; \n\tlist-style-type: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\n.noncurrent-page  a:visited {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.noncurrent-page  a {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n\n.noncurrent-page a:hover {\n\ttext-decoration: none;\n\tcolor: #EC001E;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.current-page a\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n.current-page a:visited\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n", "current-page-GUID": "7F47D4D9-3681-40D5-944E-2CABD511A660", "isCollectionPage": "YES"});
//--><!]]></script>
            <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
          </div>
          <div style="height: 52px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id1" style="visibility: hidden;  height: 39px; left: 30px; position: absolute; top: 13px; width: 640px; z-index: 1; " class="style_SkipStroke_1">
              <div class="text-content Normal_External_640_39" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header"><a title="../1/6_Introduction.html" href="../1/6_Introduction.html">windows debugging series</a></p>
                </div>
              </div>
              <div id="generic-header-attribute" class="Header"></div>
            </div>
          </div>
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id2" style="visibility: hidden;  height: 29px; left: 30px; position: absolute; top: 42px; width: 640px; z-index: 1; " class="style_SkipStroke_2">
              <div class="text-content Normal_External_640_29" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title">WinDbg Part I</p>
                </div>
              </div>
              <div id="generic-title-attributes" class="Title"></div>
            </div>
            


            <div id="id3" style="visibility: hidden;  height: 23px; left: 30px; position: absolute; top: 9px; width: 640px; z-index: 1; " class="style_SkipStroke_3">
              <div class="text-content Normal_External_640_23" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">8 de fevereiro de 2013</p>
                </div>
              </div>
              <div id="generic-datefield-attributes" class="Date"></div>
            </div>
            <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
            <div style="visibility: hidden;  margin-left: 30px; margin-top: 76px; position: relative; width: 640px; z-index: 1; " class="style_SkipStroke_4 flowDefining">
              <div class="text-content Normal_External_640_3535" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-top: 0pt; " class="Body">As part of the Debugging Tools for Windows, WinDbg is a very known debugging tool that can use for both live and postmortem debug, user and kernel mode with a graphical user interface.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">The focus of this command will be the <span class="style">!analyze</span> extension command. Its goals is to automatic analyze failures, detecting and assigning to known problems of dumps. Its parameters are:<br /></p>
                  <p class="paragraph_style"><span style="line-height: 15px; " class="style_1">!analyze -v</span> or <span style="line-height: 15px; " class="style_1">!analyze -v -hang</span>. The former is used for crash dumps and latter for hanging dumps.<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style">Both commands bring a list of information that help us to track the problem. The details description of the command output is discussed in following list:<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">FAULTING_IP</span>: shows the value of the instructions pointer when the fault occurred:<br /></p>
                  <p class="paragraph_style"><span class="style">FAULTING_IP: <br /></span></p>
                  <p class="paragraph_style"><span class="style">kernel32!RaiseException+53<br /></span></p>
                  <p class="paragraph_style"><span class="style">7c812afb 5e              pop     esi</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">EXCEPTION_RECORD:<span class="style_3"> gives more detail about the exception that occurred in the form of an exception record:<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">EXCEPTION_RECORD:  1e77e998 -- (.exr 0x1e77e998)<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">.exr 0x1e77e998<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">ExceptionAddress: 7c812afb (kernel32!RaiseException+0x00000053)<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   ExceptionCode: e0434352 (CLR exception)<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">  ExceptionFlags: 00000001<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">NumberParameters: 5<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   Parameter[0]: 80131500<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   Parameter[1]: 00000000<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   Parameter[2]: 00000000<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   Parameter[3]: 00000000<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">   Parameter[4]: 79140000</span><span class="style_3"><br /></span></p>
                  <p class="paragraph_style"><span class="style">ExceptionAddress</span> shows the address where the exception occurred; <span class="style">ExceptionCode</span> tells us the exact exception that caused the fault; <span class="style">ExceptionFlag</span> show the flag associated with the exception; <span class="style">NumberParameters</span> tells us the number of parameters associated with exception.<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">FAULTING_THREAD:<span class="style_3"> tells us which thread caused the fault to occur:<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">FAULTING_THREAD:  ffffffff</span><span class="style_3"><br /></span></p>
                  <p class="paragraph_style_1"><span class="style_3">In this specific case, the thread id was not saved, but it is possible to determine which thread caused the fault using other command that will be discussed in later posts.<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_3"><br /></span></p>
                  <p class="paragraph_style_1">BUGCHECK_STR:<span class="style_3"> represents a textual description of the ‘bugcheck’ that occurred:<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">BUGCHECK_STR:  APPLICATION_FAULT_CLR_EXCEPTION_WRONG_SYMBOLS</span><span class="style_3"><br /></span></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">PROCESS_NAME:<span class="style_3"> tells us the name of the process that exhibiting the fault:<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">PROCESS_NAME:  devenv.exe</span><span class="style_3"><br /></span></p>
                  <p class="paragraph_style_1"><span class="style_3"><br /></span></p>
                  <p class="paragraph_style_1">ERROR_CODE:<span class="style_3"> tells us the error code (</span><span class="style_4">NTSTATUS</span><span class="style_3">) that caused the fault:<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_4">ERROR_CODE: (NTSTATUS) 0xe0434f4d - &lt;Unable to get error code text&gt;</span><br /></p>
                  <p class="paragraph_style_1"><span class="style_3">Unfortunately, there is no text information, but in most of cases, there is the information. In lost of cases the text information is not provided, it is possible to identify it by analyzing the content of the id. In this specific case it is possible to infer the code is an E0 ‘COM’ (43 = ‘C’, 4f = ‘O”, 4d = ‘M’).<br /></span></p>
                  <p class="paragraph_style_1"><span class="style_3">Other details can be obtained from Windows EXCEPTION_RECODE structure in </span><a class="class1" title="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082(v=vs.85).aspx" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082(v=vs.85).aspx"><span class="style_3">MSDN</span></a><span class="style_3">.</span><br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style"><span class="style_2">DEFAULT_BUCKED_ID:</span> details the general category of fault that this particular fault falls under:<br /></p>
                  <p class="paragraph_style"><span class="style">DEFAULT_BUCKET_ID:  CLR_EXCEPTION</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">PRIMARY_PROBLEM_CLASS:<span class="style_3"> indicates the primary class of the problems that the fault was categorized in:<br /></span></p>
                  <p class="paragraph_style"><span class="style">PRIMARY_PROBLEM_CLASS:  CLR_EXCEPTION</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">LAST_CONTROL_TRANSFER:</span> shows the last two functions calls made on the stack:<br /></p>
                  <p class="paragraph_style"><span class="style">LAST_CONTROL_TRANSFER:  from 7928bd60 to 7c812afb</span><br /></p>
                  <p class="paragraph_style">The <span class="style">ln &lt;address&gt;</span> command shows the name of the function associated with the address. In this sample, the control was transferred from <span class="style">kernel32!RaiseException</span> to <span class="style">clr!RaiseTheExceptionInternalOnly</span>. This information can also be taken from the stack trace.<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">STACK_TEXT:</span> shows the stack trace of the thread:<br /></p>
                  <p class="paragraph_style"><span class="style">STACK_TEXT:  <br /></span></p>
                  <p class="paragraph_style"><span class="style">7c812afb kernel32!RaiseException+0x53<br /></span></p>
                  <p class="paragraph_style"><span class="style">7928bd60 clr!RaiseTheExceptionInternalOnly+0x276<br /></span></p>
                  <p class="paragraph_style"><span class="style">7928bf99 clr!IL_Throw+0x14c<br /></span></p>
                  <p class="paragraph_style"><span class="style">0f840c32 Microsoft_Build_ni+0x380c32<br /></span></p>
                  <p class="paragraph_style"><span class="style">0f5b88eb Microsoft_Build_ni+0xf88eb<br /></span></p>
                  <p class="paragraph_style"><span class="style">0f5b8718 Microsoft_Build_ni+0xf8718<br /></span></p>
                  <p class="paragraph_style"><span class="style">79b2ae5b mscorlib_ni+0x2aae5b<br /></span></p>
                  <p class="paragraph_style"><span class="style">79ab7ff4 mscorlib_ni+0x237ff4<br /></span></p>
                  <p class="paragraph_style"><span class="style">79ab7f34 mscorlib_ni+0x237f34<br /></span></p>
                  <p class="paragraph_style"><span class="style">79b2ade8 mscorlib_ni+0x2aade8<br /></span></p>
                  <p class="paragraph_style"><span class="style">791421bb clr!CallDescrWorker+0x33<br /></span></p>
                  <p class="paragraph_style"><span class="style">79164be2 clr!CallDescrWorkerWithHandler+0x8e<br /></span></p>
                  <p class="paragraph_style"><span class="style">79164d84 clr!MethodDesc::CallDescr+0x194<br /></span></p>
                  <p class="paragraph_style"><span class="style">79164db9 clr!MethodDesc::CallTargetWorker+0x21<br /></span></p>
                  <p class="paragraph_style"><span class="style">79294073 clr!ThreadNative::KickOffThread_Worker+0x1e1<br /></span></p>
                  <p class="paragraph_style"><span class="style">792f0d78 clr!Thread::DoExtraWorkForFinalizer+0x114<br /></span></p>
                  <p class="paragraph_style"><span class="style">792f0dfa clr!Thread::ShouldChangeAbortToUnload+0x101<br /></span></p>
                  <p class="paragraph_style"><span class="style">792f0eb5 clr!Thread::ShouldChangeAbortToUnload+0x399<br /></span></p>
                  <p class="paragraph_style"><span class="style">792f0f51 clr!Thread::ShouldChangeAbortToUnload+0x43a<br /></span></p>
                  <p class="paragraph_style"><span class="style">79293f46 clr!ManagedThreadBase::KickOff+0x15<br /></span></p>
                  <p class="paragraph_style"><span class="style">79293e41 clr!ThreadNative::KickOffThread+0x23e<br /></span></p>
                  <p class="paragraph_style"><span class="style">792ec060 clr!Thread::intermediateThreadProc+0x4b<br /></span></p>
                  <p class="paragraph_style"><span class="style">7c80b729 kernel32!BaseThreadStart+0x37</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">FOLLOWUP_IP:</span> shows the instruction that most likely caused the fault:<br /></p>
                  <p class="paragraph_style"><span class="style">FOLLOWUP_IP: <br /></span></p>
                  <p class="paragraph_style"><span class="style">clr!RaiseTheExceptionInternalOnly+276<br /></span></p>
                  <p class="paragraph_style"><span class="style">7928bd60 c745fcfeffffff  mov     dword ptr [ebp-4],0FFFFFFFEh</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_5">One very important note regarding this and the STACK_TEXT fields is: DO NOT ALWAYS BELIEVE ON THEM! The dump my show them as the caused of the fault, but, as discussed in corruption posts, unpredictable behavior may have led to this point, when the real root of the fault is far away behind! This shall be discussed in other posts.</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">SYMBOL_STACK_INDEX:</span> corresponds to the frame in the thread’s stack trace that caused the fault:<br /></p>
                  <p class="paragraph_style"><span class="style">SYMBOL_STACK_INDEX:  1</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">FOLLOWUP_NAME and FOLLOWUP:</span> show who should be following up with this particular fault:<br /></p>
                  <p class="paragraph_style"><span class="style">FOLLOWUP_NAME:  MachineOwner</span><br /></p>
                  <p class="paragraph_style">By default, <span class="style">MachineOwner</span> is used but this can be changed modifying the <span class="style">triage.ini</span> file, located at the triage folder in the debugger installation path. You can either ignore a module, or part of it, or associated one module, or part of it, to a specified triage group or person. See the samples below:<br /></p>
                  <p class="paragraph_style"><span class="style">nt!Zw*=ignore</span><br /></p>
                  <p class="paragraph_style">This means the any fault on Zw* function of NT module will be ignored.<br /></p>
                  <p class="paragraph_style"><span class="style">AppSample!*=Support Team (SupportTeam@AppSampleCompany.com)</span><br /></p>
                  <p class="paragraph_style">This means that any fault on AppSample module the FOLLOWUP_NAME field will be filled with Support Team information.<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">MODULE_NAME:</span> states the module that is exhibiting the fault:<br /></p>
                  <p class="paragraph_style"><span class="style">MODULE_NAME: clr</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">IMAGE_NAME:</span> states the name of the image that fault occurred:<br /></p>
                  <p class="paragraph_style"><span class="style">IMAGE_NAME:  clr.dll</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">DEBUG_FLR_IMAGE_TIMESTAMP:</span> shows the image time stamp where the fault occurred:<br /></p>
                  <p class="paragraph_style"><span class="style">DEBUG_FLR_IMAGE_TIMESTAMP:  4e181a6d</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">SYMBOL_NAME:</span> shows the symbolic name where the fault occurred:<br /></p>
                  <p class="paragraph_style"><span class="style">SYMBOL_NAME:  clr!RaiseTheExceptionInternalOnly+276</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">STACK_COMMAND:</span> shows the command that were executed to get the stack trace for the faulting thread:<br /></p>
                  <p class="paragraph_style"><span class="style">STACK_COMMAND:  .cxr 1E77E9C0 ; kb ; dds 1e77ec8c ; kb</span><br /></p>
                  <p class="paragraph_style">This field helps to understand the steps performed by the <span class="style">!analyze</span> extension command. More details about the command performed above and others will be discussed in laters posts.<span class="style_6"><br /></span></p>
                  <p class="paragraph_style"><span class="style_6"><br /></span></p>
                  <p class="paragraph_style"><span class="style_7">FAILURE_BUCKET_ID and BUCKET_ID:</span><span class="style_6"> show the specific category of the problems that the fault falls under:<br /></span></p>
                  <p class="paragraph_style"><span class="style_8">FAILURE_BUCKET_ID:  CLR_EXCEPTION_e0434f4d_clr.dll!RaiseTheExceptionInternalOnly<br /></span></p>
                  <p class="paragraph_style"><span class="style_8">BUCKET_ID:  APPLICATION_FAULT_CLR_EXCEPTION_WRONG_SYMBOLS_clr!RaiseTheExceptionInternalOnly+276</span><span class="style_6"><br /></span></p>
                  <p class="paragraph_style"><span class="style_6">This information can be used by the </span><span class="style_8">!analyze</span><span class="style_6"> extension command to determine what additional information to display in the analysis result.</span><br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style"><span class="style_2">CONTEXT:</span> shows the fault context address and registers at the moment of the fault occurred:<br /></p>
                  <p class="paragraph_style"><span class="style">CONTEXT:  1e77e9c0 -- (.cxr 0x1e77e9c0)<br /></span></p>
                  <p class="paragraph_style"><span class="style">.cxr 0x1e77e9c0<br /></span></p>
                  <p class="paragraph_style"><span class="style">eax=1e77ec90 ebx=00000005 ecx=00000000 edx=0000004b esi=1e77ed50 edi=161a9158<br /></span></p>
                  <p class="paragraph_style"><span class="style">eip=7c812afb esp=1e77ec8c ebp=1e77ece0 iopl=0         nv up ei pl nz na pe nc<br /></span></p>
                  <p class="paragraph_style"><span class="style">cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000206<br /></span></p>
                  <p class="paragraph_style"><span class="style">kernel32!RaiseException+0x53:<br /></span></p>
                  <p class="paragraph_style"><span class="style">7c812afb 5e              pop     esi<br /></span></p>
                  <p class="paragraph_style"><span class="style">.cxr<br /></span></p>
                  <p class="paragraph_style"><span class="style">Resetting default scope</span><br /></p>
                  <p class="paragraph_style">The <span class="style">1e77e9c0</span> address is the context of the fault. This field also shows the same information provided by the FAULTING_IP field.<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="Body">The order the data is exhibited depends on the type of the fault. Furthermore, there may be other details depending on the fault. For instance, in case of a hang (<span style="line-height: 17px; " class="style_1">!analyze -v -hang</span>), one may see the following details:<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body"><span class="style_2">CRITICAL_SECTION:</span> shows the address of the critical section tha was found and analyzed in the starting thread.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="paragraph_style_2">BLOCKING_THREAD:<span class="style_3"> gives the ID of the thread that is blocking on the critical section shown in CRITICAL_SECTION field.<br /></span></p>
                  <p class="paragraph_style_2"><span class="style_3"><br /></span></p>
                  <p class="paragraph_style_2">DERIVED_WAIT_THREAD:<span class="style_3"> is at the heart of the hang analysis capabilities of the </span><span class="style_4">!analyze</span><span class="style_3"> extension command. When the command runs, it attempts to derive how the wait chain looks for each of the threads in the process associated with the critical section listed in the CRITICAL_SECTION field. It tries to retrieve which thread is waiting for the critical section and which thread owns it.<br /></span></p>
                  <p class="paragraph_style_2"><br /></p>
                  <p class="Body"><span class="style_2">WAIT_CHAIN_COMMAND:</span> shows the commands that can be used to further analyze the wait chain of the problematic lock.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Additionally, if the application is instrumented, for instance using the Application Verifier and/or <span class="style">gflags</span>, more fields can be seen in the <span class="style">!analyze</span> extension command result:<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body"><span class="style_2">NTGLOBALFLAG:</span> shows the flags enabled by the <span class="style">gflags</span>:<br /></p>
                  <p class="Body"><span class="style">NTGLOBALFLAG:  0</span><br /></p>
                  <p class="Body">In this case, there were not flags enabled for the fault module.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body"><span class="style_2">APPLICATION_VERIFIER_FLAGS:</span> shows the flags enabled using the Application Verifier:<br /></p>
                  <p class="Body"><span class="style">APPLICATION_VERIFIER_FLAGS:  0</span><br /></p>
                  <p class="Body"><br /></p>
                  <p style="padding-bottom: 0pt; " class="Body">All samples above came from a real crash in the Visual Studio 2010, while I was running my application under debug mode. The application was flagged by both <span class="style">gflags</span> and Application Verifier, but I had not set them for the VS. That means the system had those tools installed. If, on the other hand, the system does not have them, those fields will not appear in the <span class="style">!analyze </span>extension command result.</p>
                </div>
              </div>
              <div id="generic-body-attributes" class="Body"></div>
            </div>
            <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
          </div>
          <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id4" style="height: 30px; left: 350px; position: absolute; top: 20px; width: 319px; z-index: 1; " class="style_SkipStroke_5">
              <div class="text-content graphic_textbox_layout_style_default_External_319_30" style="padding: 0px; ">
                <div class="graphic_textbox_layout_style_default">
                  <div class="paragraph Next" style="padding-bottom: 0pt; padding-top: 0pt; "><a title="23_Memory_Corruption.html" href="23_Memory_Corruption.html" class="style_9">next</a><span class="style_10"> </span><div class="tinyText inline-block" style="height: 15px; position: relative; top: -3px; width: 10px; "><img usemap="#map1" id="shapeimage_1" src="8_WinDbg_Part_I_files/shapeimage_1.png" style="border: none; height: 21px; left: -3px; position: absolute; top: -3px; width: 16px; z-index: 1; " alt="" title="" /><map name="map1" id="map1"><area href="23_Memory_Corruption.html" title="23_Memory_Corruption.html" alt="23_Memory_Corruption.html" coords="3, 3, 13, 18" /></map></div></div>
                </div>
                <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
              </div>
            </div>
            


            <div id="id5" style="height: 30px; left: 30px; position: absolute; top: 20px; width: 320px; z-index: 1; " class="style_SkipStroke_5">
              <div class="text-content graphic_textbox_layout_style_default_External_320_30" style="padding: 0px; ">
                <div class="graphic_textbox_layout_style_default">
                  <div class="paragraph Previous" style="padding-bottom: 0pt; padding-top: 0pt; "><div class="tinyText inline-block" style="height: 15px; position: relative; width: 10px; "><img usemap="#map2" id="shapeimage_2" src="8_WinDbg_Part_I_files/shapeimage_2.png" style="border: none; height: 21px; left: -3px; position: absolute; top: -3px; width: 16px; z-index: 1; " alt="" title="" /><map name="map2" id="map2"><area href="7_ADPlus.html" title="7_ADPlus.html" alt="7_ADPlus.html" coords="3, 3, 13, 18" /></map></div><span class="style_10"> </span><a title="7_ADPlus.html" href="7_ADPlus.html" class="style_10">previous</a></div>
                </div>
                <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


