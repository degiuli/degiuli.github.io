<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 2.0.4" />
    <meta name="iWeb-Build" content="local-build-20130324" />
    <meta name="viewport" content="width=700" />
    <title>Windows Debugging Series</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="23_Memory_Corruption_files/23_Memory_Corruption.css" />
    <!--[if IE]><link rel='stylesheet' type='text/css' media='screen,print' href='23_Memory_Corruption_files/23_Memory_CorruptionIE.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'Blog.html';
iWebBlogMainPageTitle = 'Blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';
iWebBlogFeedType = 'static';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="23_Memory_Corruption_files/23_Memory_Corruption.js"></script>
  </head>
  <body style="background: #ffffff url(23_Memory_Corruption_files/PhotoGray_browser_bg-3.jpg) repeat scroll top left; margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  text-align: left; width: 700px; " id="body_content">
        <div style="background: transparent url(23_Memory_Corruption_files/PhotoGray_bg_c-1.jpg) repeat scroll top left; width: 700px; ">
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div style="height: 700px; width: 700px;  height: 700px; left: 0px; position: absolute; top: -80px; width: 700px; z-index: 1; " class="tinyText style_SkipStroke">
              <img src="23_Memory_Corruption_files/Darkroom_spotlight.jpg" alt="" style="border: none; height: 700px; width: 700px; " />
            </div>
            <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
            <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 19px; position: relative; width: 700px; z-index: 1; ">
    
              <div id="widget0-navbar" class="navbar">

      
                <div id="widget0-bg" class="navbar-bg">

        
                  <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                  
      
</div>
                
    
</div>
            </div>
            <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: Futura, 'Trebuchet MS', sans-serif;\n\ttext-transform: uppercase;\n\tfont-size: .7em;\n\tcolor: #C1C1C1;\n\tline-height: 25px;\n\ttext-align: center;\n\tpadding: 0px;\n\tbackground-image: url(23_Memory_Corruption_files\/PhotoGray_nav_bg.png);\n\t_background-image: url(23_Memory_Corruption_files\/PhotoGray_nav_bg.jpg);\n\tbackground-repeat: repeat-y;\n\tborder-top: 1px solid #999;\n\tborder-bottom: 1px solid #999;\n}\n\n.navbar-bg {\n\tpadding: 6px 0px 4px 0px;\n}\n\n.navbar ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n.navbar ul li {\n\tdisplay: inline; \n\tlist-style-type: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\n.noncurrent-page  a:visited {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.noncurrent-page  a {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n\n.noncurrent-page a:hover {\n\ttext-decoration: none;\n\tcolor: #EC001E;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.current-page a\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n.current-page a:visited\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n", "current-page-GUID": "7F47D4D9-3681-40D5-944E-2CABD511A660", "isCollectionPage": "YES"});
//--><!]]></script>
            <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
          </div>
          <div style="height: 52px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id1" style="visibility: hidden;  height: 39px; left: 30px; position: absolute; top: 13px; width: 640px; z-index: 1; " class="style_SkipStroke_1">
              <div class="text-content Normal_External_640_39" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header"><a title="../1/6_Introduction.html" href="../1/6_Introduction.html">Windows Debugging Series</a></p>
                </div>
              </div>
              <div id="generic-header-attribute" class="Header"></div>
            </div>
          </div>
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id2" style="visibility: hidden;  height: 29px; left: 30px; position: absolute; top: 44px; width: 640px; z-index: 1; " class="style_SkipStroke_2">
              <div class="text-content Normal_External_640_29" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title">Memory Corruption</p>
                </div>
              </div>
              <div id="generic-title-attributes" class="Title"></div>
            </div>
            


            <div id="id3" style="visibility: hidden;  height: 23px; left: 30px; position: absolute; top: 11px; width: 640px; z-index: 1; " class="style_SkipStroke_3">
              <div class="text-content Normal_External_640_23" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">23 de fevereiro de 2013</p>
                </div>
              </div>
              <div id="generic-datefield-attributes" class="Date"></div>
            </div>
            <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
            <div style="visibility: hidden;  margin-left: 30px; margin-top: 85px; position: relative; width: 640px; z-index: 1; " class="style_SkipStroke_4 flowDefining">
              <div class="text-content Normal_External_640_1200" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-top: 0pt; " class="Body">Errors in running application depends on the type of language in which is written, i.e. whether is a safe language like Java and C# or an unsafe language like C and C++. (C and C++ are the focus language of this series.)<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Unsafe languages can lead to “undefined behavior”, in which “Anything at all can happen; the Standard imposes no requirements. The program may fail to compile, or it may execute incorrectly (either crashing or silently generating incorrect results), or it may fortuitously do exactly what the programmer intended.” as stated in C FAQ.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Basically, memory corruption is what the undefined behavior means. It refers to any issue that affects an application memory. It is one of the most intractable forms of programming error either because the source of the issue and its manifestation might be far apart or because its symptoms appear under unusual conditions.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Memory corruption may happen at least one of the following conditions take place:<br /></p>
                  <ol>
                    <li style="line-height: 21px; padding-left: 13px; text-indent: -13px; " class="full-width">
                      <p style="text-indent: -13px; " class="paragraph_style"><span style="font-size: 14px; " class="Bullet">*</span><span style="width: 4px; " class="inline-block"></span>The executing thread writes to a black of memory that it does not own.<br /></p>
                    </li>
                    <li style="line-height: 21px; padding-left: 13px; text-indent: -13px; " class="full-width">
                      <p style="text-indent: -13px; " class="paragraph_style"><span style="font-size: 14px; " class="Bullet">*</span><span style="width: 4px; " class="inline-block"></span>The executing thread writes to a block of memory the it does own but corrupts its state or other application memory block state.<br /></p>
                    </li>
                  </ol>
                  <p class="Body"><br /></p>
                  <p class="Body">In any case an exception is generated and this can cause application to crash. If there is no crash, application enters in an unpredictable behavior:<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body"><span class="style">Application crashes</span><br /></p>
                  <p class="Body">An application crash stops its execution because it may write to memory consider invalid by the operating system. In some cases, the writing may be considered valid, but it modifies the application state. Subsequently, the application might try to use the memory incorrectly written and the crash can happen depending on the memory access.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body"><span class="style">Unpredictable behavior</span><br /></p>
                  <p class="Body">An application may write bad data to the memory owned by other parts of the application, which might not cause the crash. When other part of the application access the bad data written, it changes is state in an unpredictable way which leads to unpredictable behavior, such as processing wrong instructions, show incorrect data, etc.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">There are two common issue that represent the memory corruptions: <a class="class1" title="24_Stack_Corruption.html" href="24_Stack_Corruption.html">Stack Corruption</a> and <a class="class2" title="24_Heap_Corruption.html" href="24_Heap_Corruption.html">Heap Corruption</a>. Both will be discussed in later posts, but firstly we shall discuss how we can detect and fix memory corruption issues.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="paragraph_style_1"><span style="line-height: 22px; " class="style_1">How do Detect Memory Corruption</span><br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Detecting and fixing a memory corruption issue is at minimum difficult. Some occurrence can be so difficult that we may spend months looking for a solution.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">The first one is the analysis, which consist on collect data, such as application trace, dump files and source code, when available. The tools needed to analyze the dump will be discussed in later posts.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Source code can be followed while the traces and dumps are analyzed. This helps to understand what behavior was expected and was not performed, which function/method was performed before occurred the exception.<br /></p>
                  <p class="Body"><br /></p>
                  <p class="Body">Based on the data collected, one can go deeper into the source code, analyzing the behavior expected and what occurred when the issue happened. One can also use a debugger tool and/or instrument the source code to test it again the conditions the application crashed. Unfortunately, lots of those conditions are certainly not easily reproduced. Tools that instrument source code and debugger tools will also be discussed in later posts.<br /></p>
                </div>
                <div style="height: 20px; line-height: 20px; " class="tinyText"> </div>
              </div>
              <div id="generic-body-attributes" class="Body"></div>
            </div>
            <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
          </div>
          <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id4" style="height: 30px; left: 350px; position: absolute; top: 20px; width: 319px; z-index: 1; " class="style_SkipStroke_5">
              <div class="text-content graphic_textbox_layout_style_default_External_319_30" style="padding: 0px; ">
                <div class="graphic_textbox_layout_style_default">
                  <div class="paragraph Next" style="padding-bottom: 0pt; padding-top: 0pt; "><a title="24_Stack_Corruption.html" href="24_Stack_Corruption.html" class="style_2">next</a><span class="style_3"> </span><div class="tinyText inline-block" style="height: 15px; position: relative; top: -3px; width: 10px; "><img usemap="#map1" id="shapeimage_1" src="23_Memory_Corruption_files/shapeimage_1.png" style="border: none; height: 21px; left: -3px; position: absolute; top: -3px; width: 16px; z-index: 1; " alt="" title="" /><map name="map1" id="map1"><area href="24_Stack_Corruption.html" title="24_Stack_Corruption.html" alt="24_Stack_Corruption.html" coords="3, 3, 13, 18" /></map></div></div>
                </div>
                <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
              </div>
            </div>
            


            <div id="id5" style="height: 30px; left: 30px; position: absolute; top: 20px; width: 320px; z-index: 1; " class="style_SkipStroke_5">
              <div class="text-content graphic_textbox_layout_style_default_External_320_30" style="padding: 0px; ">
                <div class="graphic_textbox_layout_style_default">
                  <div class="paragraph Previous" style="padding-bottom: 0pt; padding-top: 0pt; "><div class="tinyText inline-block" style="height: 15px; position: relative; width: 10px; "><img usemap="#map2" id="shapeimage_2" src="23_Memory_Corruption_files/shapeimage_2.png" style="border: none; height: 21px; left: -3px; position: absolute; top: -3px; width: 16px; z-index: 1; " alt="" title="" /><map name="map2" id="map2"><area href="8_WinDbg_Part_I.html" title="8_WinDbg_Part_I.html" alt="8_WinDbg_Part_I.html" coords="3, 3, 13, 18" /></map></div><span class="style_3"> </span><a title="8_WinDbg_Part_I.html" href="8_WinDbg_Part_I.html" class="style_3">previous</a></div>
                </div>
                <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


